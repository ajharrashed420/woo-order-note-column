jQuery(document).ready((function(o){o(document).on("click",".wonc-order-notes-toggle",(function(n){n.preventDefault(),n.stopPropagation();var e=o(this).data("order-id"),t=o("#wonc-order-notes-container-"+e);o(".wonc-order-notes-container").not(t).hide(),t.is(":visible")?t.hide():(t.css("display","block"),function(n,e){var t=e.find(".wonc-order-notes-list");t.html('<p class="loading">'+(wonc_order_notes_params.i18n.loading||"Loading...")+"</p>"),o.ajax({url:wonc_order_notes_params.ajax_url,type:"POST",data:{action:"wonc_order_notes_get_notes",security:wonc_order_notes_params.nonce,order_id:n},success:function(o){o.success&&t.html(o.data)}})}(e,t))})),o(document).on("click",".wonc-order-notes-add-note",(function(){var n=o(this),e=n.data("order-id"),t=o("#wonc-order-notes-container-"+e),r=t.find(".wonc-order-notes-new-note"),c=r.val().trim(),d=t.find(".wonc-order-notes-type").val();c&&(n.prop("disabled",!0).text(wonc_order_notes_params.i18n.adding_note||"Adding..."),o.ajax({url:wonc_order_notes_params.ajax_url,type:"POST",data:{action:"wonc_order_notes_add_note",security:wonc_order_notes_params.nonce,order_id:e,note:c,note_type:d},success:function(n){n.success&&(r.val(""),t.find(".wonc-order-notes-list").append(n.data),function(n){var e=o('.wonc-order-notes-toggle[data-order-id="'+n+'"]'),t=e.find(".wonc-order-notes-count"),r=t.length?parseInt(t.text()):0;0===r?e.append('<span class="wonc-order-notes-count">1</span>'):t.text(r+1)}(e))},complete:function(){n.prop("disabled",!1).text(wonc_order_notes_params.i18n.add_note||"Add Note")}}))})),o(document).on("click",".wonc-order-notes-close",(function(n){n.preventDefault(),n.stopPropagation(),o(this).closest(".wonc-order-notes-container").hide()})),o(document).on("click",".wonc-order-notes-container",(function(o){o.stopPropagation()})),o(document).on("click",(function(n){o(n.target).closest(".wonc-order-notes-container, .wonc-order-notes-toggle").length||o(".wonc-order-notes-container").hide()}))}));